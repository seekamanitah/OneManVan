@inject IJSRuntime JS

<button class="btn btn-link theme-toggle" @onclick="ToggleTheme" title="Toggle theme">
    @if (isDarkMode)
    {
        <i class="bi bi-sun-fill"></i>
    }
    else
    {
        <i class="bi bi-moon-fill"></i>
    }
</button>

@code {
    private bool isDarkMode = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Load saved theme preference
            isDarkMode = await JS.InvokeAsync<bool>("themeManager.getTheme");
            StateHasChanged();
        }
    }

    private async Task ToggleTheme()
    {
        isDarkMode = !isDarkMode;
        await JS.InvokeVoidAsync("themeManager.setTheme", isDarkMode);
    }
}
