<UserControl x:Class="OneManVan.Pages.ProductsDataGridPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:converters="clr-namespace:OneManVan.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1400"
             Background="{DynamicResource BackgroundBrush}">

    <UserControl.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibility"/>
        
        <!-- DataGrid Style -->
        <Style x:Key="ModernDataGrid" TargetType="DataGrid">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="{DynamicResource Surface2Brush}"/>
            <Setter Property="RowBackground" Value="Transparent"/>
            <Setter Property="AlternatingRowBackground" Value="{DynamicResource Surface2Brush}"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="RowHeaderWidth" Value="0"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>
        
        <!-- DataGrid Header Style -->
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#6366F1"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="BorderThickness" Value="0,0,1,0"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Surface2Brush}"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>
        
        <!-- DataGrid Cell Style -->
        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Background="{TemplateBinding Background}" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ListItemSelectedBrush}"/>
                    <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <!-- DataGrid Row Style -->
        <Style TargetType="DataGridRow">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ListItemHoverBrush}"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ListItemSelectedBrush}"/>
                </Trigger>
                <DataTrigger Binding="{Binding IsDiscontinued}" Value="True">
                    <Setter Property="Opacity" Value="0.6"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        
        <!-- Filter Chip Button Style -->
        <Style x:Key="FilterChip" TargetType="ToggleButton">
            <Setter Property="Background" Value="{DynamicResource Surface2Brush}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                CornerRadius="14" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#6366F1"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.85"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Action Button Style -->
        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Background" Value="#6366F1"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.85"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
            <Setter Property="Background" Value="{DynamicResource Surface2Brush}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
        </Style>

        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
            <Setter Property="Background" Value="{DynamicResource SuccessBrush}"/>
        </Style>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="600"/>
            <ColumnDefinition Width="380"/>
        </Grid.ColumnDefinitions>

        <!-- Left: Product List -->
        <Grid Grid.Column="0" Margin="0,0,15,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Products Catalog" FontSize="24" FontWeight="Bold" 
                                   Foreground="{DynamicResource TextBrush}"/>
                    </StackPanel>
                    <TextBlock x:Name="ProductCountText" Text="Loading products..." 
                               FontSize="13" Foreground="{DynamicResource SubtextBrush}" Margin="34,5,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="Import" Click="OnImportClick"
                            Style="{StaticResource SecondaryButton}" Margin="0,0,10,0"/>
                    <Button Content="Export" Click="OnExportClick"
                            Style="{StaticResource SecondaryButton}" Margin="0,0,10,0"/>
                    <Button Content="+ Add Product" Click="OnAddProductClick"
                            Style="{StaticResource ActionButton}"/>
                </StackPanel>
            </Grid>

            <!-- Search and Filters Row -->
            <Grid Grid.Row="1" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="300"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Search Box -->
                <Border Grid.Column="0" Background="{DynamicResource SurfaceBrush}" 
                        CornerRadius="8" Padding="2">
                    <Grid>
                        <TextBox x:Name="SearchBox" 
                                 Background="Transparent"
                                 Foreground="{DynamicResource TextBrush}"
                                 BorderThickness="0"
                                 Padding="12,10"
                                 FontSize="13"
                                 TextChanged="OnSearchTextChanged"/>
                        <TextBlock Text="Search products..." 
                                   IsHitTestVisible="False"
                                   Foreground="{DynamicResource SubtextBrush}"
                                   FontSize="13"
                                   VerticalAlignment="Center" Margin="14,0,0,0"
                                   x:Name="SearchPlaceholder"/>
                    </Grid>
                </Border>

                <!-- Filter Chips -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="15,0,0,0">
                    <TextBlock Text="Category:" FontSize="12" Foreground="{DynamicResource SubtextBrush}" 
                               VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ToggleButton x:Name="FilterAll" Content="All" IsChecked="True"
                                  Style="{StaticResource FilterChip}" Margin="0,0,5,0"
                                  Click="OnCategoryFilterClick"/>
                    <ToggleButton x:Name="FilterAC" Content="AC"
                                  Style="{StaticResource FilterChip}" Margin="0,0,5,0"
                                  Click="OnCategoryFilterClick"/>
                    <ToggleButton x:Name="FilterHeatPump" Content="Heat Pump"
                                  Style="{StaticResource FilterChip}" Margin="0,0,5,0"
                                  Click="OnCategoryFilterClick"/>
                    <ToggleButton x:Name="FilterFurnace" Content="Furnace"
                                  Style="{StaticResource FilterChip}" Margin="0,0,5,0"
                                  Click="OnCategoryFilterClick"/>
                    <ToggleButton x:Name="FilterMiniSplit" Content="Mini Split"
                                  Style="{StaticResource FilterChip}" Margin="0,0,15,0"
                                  Click="OnCategoryFilterClick"/>
                    
                    <ComboBox x:Name="ManufacturerFilter" Width="150" SelectionChanged="OnManufacturerFilterChanged">
                        <ComboBoxItem Content="All Manufacturers" IsSelected="True"/>
                    </ComboBox>
                </StackPanel>
            </Grid>

            <!-- Quick Stats Bar -->
            <Border Grid.Row="2" Background="{DynamicResource SurfaceBrush}" 
                    CornerRadius="8" Padding="15,10" Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal">
                    <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                        <TextBlock Text="Total:" FontSize="12" Foreground="{DynamicResource SubtextBrush}" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock x:Name="TotalCount" Text="0" FontSize="16" FontWeight="Bold"
                                   Foreground="#6366F1" VerticalAlignment="Center"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                        <TextBlock Text="Active:" FontSize="12" Foreground="{DynamicResource SubtextBrush}" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock x:Name="ActiveCount" Text="0" FontSize="16" FontWeight="Bold"
                                   Foreground="{DynamicResource SuccessBrush}" VerticalAlignment="Center"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                        <TextBlock Text="Discontinued:" FontSize="12" Foreground="{DynamicResource SubtextBrush}" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock x:Name="DiscontinuedCount" Text="0" FontSize="16" FontWeight="Bold"
                                   Foreground="{DynamicResource SubtextBrush}" VerticalAlignment="Center"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Manufacturers:" FontSize="12" Foreground="{DynamicResource SubtextBrush}" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock x:Name="ManufacturerCount" Text="0" FontSize="16" FontWeight="Bold"
                                   Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- DataGrid -->
            <Border Grid.Row="3" Background="{DynamicResource SurfaceBrush}" 
                    CornerRadius="8" Padding="0">
                <DataGrid x:Name="ProductGrid" 
                          Style="{StaticResource ModernDataGrid}"
                          SelectionChanged="OnProductSelectionChanged"
                          MouseDoubleClick="OnRowDoubleClick"
                          Sorting="OnDataGridSorting">
                    <DataGrid.Columns>
                        <!-- Category Icon -->
                        <DataGridTemplateColumn Header="" Width="40" CanUserSort="False">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding CategoryIcon}" FontSize="18"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- Model Number -->
                        <DataGridTemplateColumn Header="Model" Width="140" SortMemberPath="ModelNumber">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                        <TextBlock Text="{Binding ModelNumber}" FontWeight="SemiBold"
                                                   Foreground="{DynamicResource TextBrush}"/>
                                        <TextBlock Text="{Binding ProductNumber}" FontSize="10"
                                                   Foreground="{DynamicResource SubtextBrush}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- Manufacturer -->
                        <DataGridTextColumn Header="Manufacturer" Binding="{Binding Manufacturer}" Width="120"/>
                        
                        <!-- Product Name -->
                        <DataGridTextColumn Header="Name" Binding="{Binding ProductName}" Width="*">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        
                        <!-- Capacity -->
                        <DataGridTextColumn Header="Capacity" Binding="{Binding CapacityDisplay}" Width="80"/>
                        
                        <!-- Efficiency -->
                        <DataGridTextColumn Header="Efficiency" Binding="{Binding EfficiencyDisplay}" Width="90"/>
                        
                        <!-- Price -->
                        <DataGridTemplateColumn Header="Price" Width="90" SortMemberPath="SuggestedSellPrice">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding SuggestedSellPrice, StringFormat='${0:N0}'}" 
                                               FontWeight="Medium" Foreground="{DynamicResource SuccessBrush}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- Documents -->
                        <DataGridTemplateColumn Header="Docs" Width="50" CanUserSort="False">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource Surface2Brush}" 
                                            CornerRadius="10" Padding="6,2" HorizontalAlignment="Center">
                                        <TextBlock Text="{Binding Documents.Count}" FontSize="11"
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <!-- Pagination Footer -->
            <Border Grid.Row="4" Background="{DynamicResource SurfaceBrush}" 
                    CornerRadius="8" Padding="15,10" Margin="0,10,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <TextBlock Text="Show" FontSize="12" Foreground="{DynamicResource SubtextBrush}" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <ComboBox x:Name="PageSizeCombo" Width="70" SelectionChanged="OnPageSizeChanged">
                            <ComboBoxItem Content="25"/>
                            <ComboBoxItem Content="50" IsSelected="True"/>
                            <ComboBoxItem Content="100"/>
                            <ComboBoxItem Content="All"/>
                        </ComboBox>
                    </StackPanel>

                    <TextBlock Grid.Column="1" x:Name="PageInfo" Text="Showing 1-50 of 100 products" 
                               FontSize="12" Foreground="{DynamicResource SubtextBrush}"
                               HorizontalAlignment="Center" VerticalAlignment="Center"/>

                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button x:Name="FirstPageBtn" Content="|&lt;" Click="OnFirstPageClick"
                                Style="{StaticResource SecondaryButton}" Padding="8,4" Margin="0,0,5,0"/>
                        <Button x:Name="PrevPageBtn" Content="&lt;" Click="OnPrevPageClick"
                                Style="{StaticResource SecondaryButton}" Padding="8,4" Margin="0,0,5,0"/>
                        <TextBlock x:Name="CurrentPageText" Text="Page 1" FontSize="12" 
                                   Foreground="{DynamicResource TextBrush}"
                                   VerticalAlignment="Center" Margin="10,0"/>
                        <Button x:Name="NextPageBtn" Content="&gt;" Click="OnNextPageClick"
                                Style="{StaticResource SecondaryButton}" Padding="8,4" Margin="0,0,5,0"/>
                        <Button x:Name="LastPageBtn" Content="&gt;|" Click="OnLastPageClick"
                                Style="{StaticResource SecondaryButton}" Padding="8,4"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- Right: Product Details Panel -->
        <Border Grid.Column="1" Background="{DynamicResource SurfaceBrush}" 
                CornerRadius="8" Padding="20">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <!-- No Selection State -->
                <StackPanel x:Name="NoSelectionPanel" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="Select a product" FontSize="18" 
                               Foreground="{DynamicResource SubtextBrush}"
                               HorizontalAlignment="Center" Margin="0,15,0,0"/>
                    <TextBlock Text="to view specifications and documents" FontSize="13" 
                               Foreground="{DynamicResource SubtextBrush}"
                               HorizontalAlignment="Center" Margin="0,5,0,0"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Product Details (shown when product selected) -->
        <Border x:Name="ProductDetailsPanel" Grid.Column="1" Background="{DynamicResource SurfaceBrush}" 
                CornerRadius="8" Padding="20" Visibility="Collapsed">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Header -->
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="DetailModelNumber" Text="Model Number" 
                                           FontSize="20" FontWeight="Bold"
                                           Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            <TextBlock x:Name="DetailManufacturer" Text="Manufacturer" 
                                       FontSize="14" Foreground="{DynamicResource SubtextBrush}" 
                                       Margin="0,2,0,0"/>
                            <TextBlock x:Name="DetailProductName" Text="Product Name" 
                                       FontSize="13" Foreground="{DynamicResource SubtextBrush}" 
                                       Margin="0,2,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                            <Button Content="Edit" ToolTip="Edit Product" Click="OnEditProductClick"
                                    Style="{StaticResource SecondaryButton}" 
                                    Foreground="{DynamicResource PrimaryBrush}"
                                    FontSize="13" Padding="12,6" Margin="0,0,5,0"/>
                            <Button Content="Delete" ToolTip="Delete Product" Click="OnDeleteProductClick"
                                    Style="{StaticResource SecondaryButton}" 
                                    Foreground="{DynamicResource ErrorBrush}"
                                    FontSize="13" Padding="12,6"/>
                        </StackPanel>
                    </Grid>

                    <!-- Quick Actions -->
                    <Border Background="{DynamicResource BackgroundBrush}" CornerRadius="6" 
                            Padding="12" Margin="0,0,0,15">
                        <StackPanel>
                            <Button Content="? Add to Estimate" Click="OnAddToEstimateClick"
                                    Style="{StaticResource SuccessButton}" 
                                    HorizontalAlignment="Stretch" Margin="0,0,0,8"/>
                            <Button Content="?? Create Asset from Product" Click="OnCreateAssetClick"
                                    Style="{StaticResource ActionButton}" 
                                    HorizontalAlignment="Stretch"/>
                        </StackPanel>
                    </Border>

                    <!-- Specifications Section -->
                    <TextBlock Text="Specifications" FontSize="14" FontWeight="SemiBold"
                               Foreground="#6366F1" Margin="0,0,0,10"/>
                    
                    <Border Background="{DynamicResource BackgroundBrush}" CornerRadius="6" 
                            Padding="12" Margin="0,0,0,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,10">
                                <TextBlock Text="Capacity" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailCapacity" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Margin="0,0,0,10">
                                <TextBlock Text="Efficiency" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailEfficiency" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,10">
                                <TextBlock Text="Refrigerant" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailRefrigerant" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,0,10">
                                <TextBlock Text="Electrical" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailElectrical" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,10,10">
                                <TextBlock Text="Dimensions" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailDimensions" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Grid.Column="1" Margin="0,0,0,10">
                                <TextBlock Text="Weight" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailWeight" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="3" Grid.Column="0" Margin="0,0,10,10">
                                <TextBlock Text="Filter Size" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailFilterSize" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Row="3" Grid.Column="1" Margin="0,0,0,10">
                                <TextBlock Text="Min Circuit Amp" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailMinCircuit" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Pricing Section -->
                    <TextBlock Text="Pricing" FontSize="14" FontWeight="SemiBold"
                               Foreground="{DynamicResource SuccessBrush}" Margin="0,0,0,10"/>
                    
                    <Border Background="{DynamicResource BackgroundBrush}" CornerRadius="6" 
                            Padding="12" Margin="0,0,0,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,10">
                                <TextBlock Text="MSRP" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailMsrp" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Margin="0,0,0,10">
                                <TextBlock Text="Your Cost" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailCost" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,10">
                                <TextBlock Text="Sell Price" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailSellPrice" Text="-" FontSize="15" FontWeight="Bold"
                                           Foreground="{DynamicResource SuccessBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,0,10">
                                <TextBlock Text="Margin" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailMargin" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                                <TextBlock Text="Est. Labor Hours" FontSize="11" Foreground="{DynamicResource SubtextBrush}"/>
                                <TextBlock x:Name="DetailLaborHours" Text="-" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Warranty Section -->
                    <TextBlock Text="Warranty" FontSize="14" FontWeight="SemiBold"
                               Foreground="{DynamicResource WarningBrush}" Margin="0,0,0,10"/>
                    
                    <Border Background="{DynamicResource BackgroundBrush}" CornerRadius="6" 
                            Padding="12" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock x:Name="DetailWarranty" Text="-" FontSize="13" TextWrapping="Wrap" Foreground="{DynamicResource TextBrush}"/>
                            <StackPanel x:Name="RegistrationRequiredPanel" Orientation="Horizontal" 
                                        Margin="0,8,0,0" Visibility="Collapsed">
                                <TextBlock Text="" FontSize="14" Margin="0,0,5,0"/>
                                <TextBlock Text="Registration required for full warranty" 
                                           FontSize="12" Foreground="{DynamicResource WarningBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Documents Section -->
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Documents" FontSize="14" FontWeight="SemiBold"
                                   Foreground="{DynamicResource PrimaryBrush}"/>
                        <Button Grid.Column="1" Content="+ Upload" Click="OnUploadDocumentClick"
                                Style="{StaticResource SecondaryButton}" Padding="8,4" FontSize="11"/>
                    </Grid>
                    
                    <Border Background="{DynamicResource BackgroundBrush}" CornerRadius="6" 
                            Padding="12" Margin="0,0,0,15">
                        <StackPanel x:Name="DocumentsList">
                            <TextBlock x:Name="NoDocumentsText" Text="No documents attached" 
                                       FontSize="12" Foreground="{DynamicResource SubtextBrush}"
                                       HorizontalAlignment="Center" Margin="0,10"/>
                        </StackPanel>
                    </Border>

                    <!-- Links Section -->
                    <TextBlock Text="Links" FontSize="14" FontWeight="SemiBold"
                               Foreground="{DynamicResource SubtextBrush}" Margin="0,0,0,10"
                               x:Name="LinksHeader" Visibility="Collapsed"/>
                    
                    <Border x:Name="LinksPanel" Background="{DynamicResource BackgroundBrush}" 
                            CornerRadius="6" Padding="12" Visibility="Collapsed">
                        <StackPanel>
                            <Button x:Name="ManufacturerUrlButton" Content="?? Manufacturer Website" 
                                    Click="OnManufacturerUrlClick"
                                    Style="{StaticResource SecondaryButton}" 
                                    HorizontalAlignment="Left" Margin="0,0,0,5" Visibility="Collapsed"/>
                            <Button x:Name="VideoUrlButton" Content="?? Product Video" 
                                    Click="OnVideoUrlClick"
                                    Style="{StaticResource SecondaryButton}" 
                                    HorizontalAlignment="Left" Visibility="Collapsed"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Loading Overlay -->
        <Border Grid.ColumnSpan="2" Background="#80000000" CornerRadius="8"
                x:Name="LoadingOverlay" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="?" FontSize="32" HorizontalAlignment="Center"/>
                <TextBlock Text="Loading products..." FontSize="14" Foreground="White"
                           HorizontalAlignment="Center" Margin="0,10,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
