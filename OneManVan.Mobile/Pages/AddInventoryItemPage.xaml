<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OneManVan.Mobile.Pages.AddInventoryItemPage"
             Title="Add Inventory Item"
             BackgroundColor="{AppThemeBinding Light={StaticResource LightBackground}, Dark={StaticResource DarkBackground}}">

    <Grid RowDefinitions="*, Auto">
        <ScrollView Grid.Row="0">
            <VerticalStackLayout Padding="16" Spacing="16">

                <!-- Basic Info -->
                <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}" 
                        StrokeShape="RoundRectangle 12" 
                        Stroke="Transparent"
                        Padding="16">
                    <Border.Shadow>
                        <Shadow Brush="{AppThemeBinding Light=Black, Dark={StaticResource Gray900}}" Offset="0,2" Radius="4" Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="12">
                        <Label Text="Item Information" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light={StaticResource SectionPrimary}, Dark={StaticResource SectionPrimaryDark}}"/>

                        <!-- Name -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Item Name *" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource SectionPrimary}, Dark={StaticResource SectionPrimaryDark}}" FontAttributes="Bold"/>
                            <Entry x:Name="NameEntry" 
                                   Placeholder="e.g., 20x25x1 Filter, R-410A Refrigerant"
                                   FontSize="16"/>
                        </VerticalStackLayout>

                        <!-- Category -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Category" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                            <Picker x:Name="CategoryPicker" Title="Select Category">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>General</x:String>
                                        <x:String>Filters</x:String>
                                        <x:String>Coils</x:String>
                                        <x:String>Refrigerants</x:String>
                                        <x:String>Motors</x:String>
                                        <x:String>Thermostats</x:String>
                                        <x:String>Capacitors</x:String>
                                        <x:String>Contactors</x:String>
                                        <x:String>Ductwork</x:String>
                                        <x:String>Fittings</x:String>
                                        <x:String>Electrical</x:String>
                                        <x:String>Tools</x:String>
                                        <x:String>Consumables</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>
                        </VerticalStackLayout>

                        <!-- Description -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Description" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                            <Editor x:Name="DescriptionEditor"
                                    Placeholder="Optional description..."
                                    HeightRequest="60"
                                    FontSize="14"/>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- SKU and Part Number -->
                <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}" 
                        StrokeShape="RoundRectangle 12" 
                        Stroke="Transparent"
                        Padding="16">
                    <Border.Shadow>
                        <Shadow Brush="{AppThemeBinding Light=Black, Dark={StaticResource Gray900}}" Offset="0,2" Radius="4" Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="12">
                        <Label Text="Identification" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}"/>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                            <VerticalStackLayout Spacing="4">
                                <Label Text="SKU" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Grid ColumnDefinitions="*, Auto" ColumnSpacing="8">
                                    <Entry x:Name="SkuEntry" Placeholder="Enter or scan"/>
                                    <Button Grid.Column="1"
                                            Text="Scan"
                                            BackgroundColor="{AppThemeBinding Light={StaticResource PrimarySurface}, Dark={StaticResource Gray600}}"
                                            TextColor="{StaticResource Primary}"
                                            FontSize="10"
                                            HeightRequest="40"
                                            WidthRequest="50"
                                            CornerRadius="8"
                                            Clicked="OnScanSkuClicked"/>
                                </Grid>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="1" Spacing="4">
                                <Label Text="Part Number" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Entry x:Name="PartNumberEntry" Placeholder="Mfr part #"/>
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Quantity and Unit -->
                <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}" 
                        StrokeShape="RoundRectangle 12" 
                        Stroke="Transparent"
                        Padding="16">
                    <Border.Shadow>
                        <Shadow Brush="{AppThemeBinding Light=Black, Dark={StaticResource Gray900}}" Offset="0,2" Radius="4" Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="12">
                        <Label Text="Stock" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}"/>

                        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="12">
                            <VerticalStackLayout Spacing="4">
                                <Label Text="Qty on Hand" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Entry x:Name="QuantityEntry" 
                                       Placeholder="0"
                                       Keyboard="Numeric"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="1" Spacing="4">
                                <Label Text="Unit" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Picker x:Name="UnitPicker" Title="Unit">
                                    <Picker.ItemsSource>
                                        <x:Array Type="{x:Type x:String}">
                                            <x:String>ea</x:String>
                                            <x:String>lb</x:String>
                                            <x:String>oz</x:String>
                                            <x:String>ft</x:String>
                                            <x:String>box</x:String>
                                            <x:String>case</x:String>
                                            <x:String>roll</x:String>
                                        </x:Array>
                                    </Picker.ItemsSource>
                                </Picker>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="2" Spacing="4">
                                <Label Text="Reorder Point" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Entry x:Name="ReorderPointEntry" 
                                       Placeholder="0"
                                       Keyboard="Numeric"/>
                            </VerticalStackLayout>
                        </Grid>

                        <!-- Location -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Storage Location" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                            <Entry x:Name="LocationEntry" 
                                   Placeholder="e.g., Van Bin A3, Warehouse Shelf 2"/>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Pricing -->
                <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}" 
                        StrokeShape="RoundRectangle 12" 
                        Stroke="Transparent"
                        Padding="16">
                    <Border.Shadow>
                        <Shadow Brush="{AppThemeBinding Light=Black, Dark={StaticResource Gray900}}" Offset="0,2" Radius="4" Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="12">
                        <Label Text="Pricing" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}"/>

                        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="12">
                            <VerticalStackLayout Spacing="4">
                                <Label Text="Cost" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Entry x:Name="CostEntry" 
                                       Placeholder="$0.00"
                                       Keyboard="Numeric"
                                       TextChanged="OnPriceChanged"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="1" Spacing="4">
                                <Label Text="Sell Price" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Entry x:Name="PriceEntry" 
                                       Placeholder="$0.00"
                                       Keyboard="Numeric"
                                       TextChanged="OnPriceChanged"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="2" Spacing="4">
                                <Label Text="Margin" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Label x:Name="MarginLabel" 
                                       Text="0%"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource Success}"
                                       VerticalOptions="Center"/>
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- HVAC Specifics (Optional) -->
                <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}" 
                        StrokeShape="RoundRectangle 12" 
                        Stroke="Transparent"
                        Padding="16">
                    <Border.Shadow>
                        <Shadow Brush="{AppThemeBinding Light=Black, Dark={StaticResource Gray900}}" Offset="0,2" Radius="4" Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="12">
                        <Label Text="HVAC Specifics (Optional)" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}"/>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                            <VerticalStackLayout Spacing="4">
                                <Label Text="Filter Size" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Entry x:Name="FilterSizeEntry" Placeholder="e.g., 20x25x1"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="1" Spacing="4">
                                <Label Text="Refrigerant Type" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                                <Entry x:Name="RefrigerantEntry" Placeholder="e.g., R-410A"/>
                            </VerticalStackLayout>
                        </Grid>

                        <VerticalStackLayout Spacing="4">
                            <Label Text="Supplier" FontSize="12" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                            <Entry x:Name="SupplierEntry" Placeholder="Supplier name"/>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Spacer -->
                <BoxView HeightRequest="16"/>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Fixed Bottom Action Buttons -->
        <Border Grid.Row="1" 
                BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}" 
                Padding="16"
                StrokeShape="RoundRectangle 0"
                Stroke="Transparent">
            <Border.Shadow>
                <Shadow Brush="{AppThemeBinding Light=Black, Dark={StaticResource Gray900}}" Offset="0,-2" Radius="4" Opacity="0.1"/>
            </Border.Shadow>
            <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                <Button Grid.Column="0"
                        Text="Cancel"
                        BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}"
                        TextColor="{AppThemeBinding Light={StaticResource LightTextPrimary}, Dark={StaticResource DarkTextPrimary}}"
                        CornerRadius="8"
                        HeightRequest="50"
                        Clicked="OnCancelClicked"/>
                <Button Grid.Column="1"
                        Text="Add to Inventory"
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        HeightRequest="50"
                        Clicked="OnSaveClicked"/>
            </Grid>
        </Border>
    </Grid>

</ContentPage>
