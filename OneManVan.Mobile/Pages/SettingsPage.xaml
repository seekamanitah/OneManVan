<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OneManVan.Mobile.Pages.SettingsPage"
             Title="Settings"
             BackgroundColor="{AppThemeBinding Light={StaticResource LightBackground}, Dark={StaticResource DarkBackground}}">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">

            <!-- App Info Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="8">
                    <HorizontalStackLayout Spacing="12">
                        <VerticalStackLayout>
                            <Label Text="OneManVan FSM" 
                                   FontSize="20" 
                                   FontAttributes="Bold"/>
                            <Label x:Name="TradeDescriptionLabel"
                                   Text="Field Service Management" 
                                   FontSize="13" 
                                   TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                    
                    <BoxView HeightRequest="1" Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}" Margin="0,8"/>
                    
                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto" RowSpacing="8">
                        <Label Text="Version:" TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                        <Label Grid.Column="1" Text="1.0.0-beta.2"/>
                        
                        <Label Grid.Row="1" Text="Trade:" TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                        <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="8">
                            <Label x:Name="CurrentTradeIcon" Text="" FontSize="16"/>
                            <Label x:Name="CurrentTradeLabel" Text="HVAC" TextColor="#2196F3" FontAttributes="Bold"/>
                        </HorizontalStackLayout>
                        
                        <Label Grid.Row="2" Text="Database:" TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                        <Label Grid.Row="2" Grid.Column="1" Text="Local SQLite"/>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Trade Configuration Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Trade Configuration" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#9C27B0"/>

                    <Label Text="Change your trade to update custom fields, templates, and terminology."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <!-- Current Trade Display -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F3E5F5, Dark=#3D2D4D}" 
                           StrokeShape="RoundRectangle 8" 
                           Padding="12"
                           Stroke="Transparent">
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <Label x:Name="TradeIconDisplay" 
                                   Text="" 
                                   FontSize="28"
                                   VerticalOptions="Center"/>
                            <VerticalStackLayout Grid.Column="1" Margin="12,0">
                                <Label x:Name="TradeNameDisplay" 
                                       Text="HVAC" 
                                       FontSize="16"
                                       FontAttributes="Bold"/>
                                <Label x:Name="TradeDetailDisplay" 
                                       Text="Heating, Ventilation &amp; AC" 
                                       FontSize="12" 
                                       TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                            </VerticalStackLayout>
                            <Button Grid.Column="2"
                                    Text="Change"
                                    BackgroundColor="#9C27B0"
                                    TextColor="White"
                                    FontSize="12"
                                    CornerRadius="16"
                                    HeightRequest="32"
                                    Padding="12,0"
                                    Clicked="OnChangeTradeClicked"/>
                        </Grid>
                    </Border>

                    <Button Text="Edit Custom Fields"
                            BackgroundColor="{AppThemeBinding Light=#E1BEE7, Dark=#5D3D6D}"
                            TextColor="{AppThemeBinding Light=#7B1FA2, Dark=#E1BEE7}"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnEditSchemaClicked"/>
                </VerticalStackLayout>
            </Border>

            <!-- Appearance Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Appearance" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#2196F3"/>

                    <!-- Theme Toggle -->
                    <Grid ColumnDefinitions="*,Auto">
                        <VerticalStackLayout>
                            <Label Text="Dark Mode" FontSize="16"/>
                            <Label Text="Switch between light and dark theme" 
                                   FontSize="12" 
                                   TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="1" 
                                x:Name="DarkModeSwitch"
                                OnColor="#2196F3"
                                Toggled="OnDarkModeToggled"/>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Database Configuration Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Database Configuration" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#4CAF50, Dark=#81C784}"/>

                    <Label Text="Choose between local standalone mode or remote sync mode."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <!-- Database Type Picker -->
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Connection Type" 
                               FontSize="14" 
                               FontAttributes="Bold"/>
                        <Picker x:Name="DatabaseTypePicker" 
                                BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"
                                SelectedIndexChanged="OnDatabaseTypeChanged">
                            <Picker.ItemsSource>
                                <x:Array Type="{x:Type x:String}">
                                    <x:String>Local (SQLite)</x:String>
                                    <x:String>Remote (SQL Server)</x:String>
                                </x:Array>
                            </Picker.ItemsSource>
                        </Picker>
                        <Label x:Name="LocalModeDescription"
                               Text="Standalone mode - works offline without internet"
                               FontSize="11"
                               TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"
                               IsVisible="True"/>
                        <Label x:Name="RemoteModeDescription"
                               Text="Sync mode - enables multi-device synchronization"
                               FontSize="11"
                               TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"
                               IsVisible="False"/>
                    </VerticalStackLayout>

                    <!-- SQL Server Connection Details -->
                    <VerticalStackLayout x:Name="SqlServerMobilePanel" 
                                         Spacing="12" 
                                         IsVisible="False">
                        
                        <Label Text="Connection Details" 
                               FontSize="14" 
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light=#4CAF50, Dark=#81C784}"/>

                        <!-- Server Address -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Server Address" FontSize="12"/>
                            <Entry x:Name="ServerAddressMobileEntry" 
                                   Placeholder="192.168.1.100 or localhost"
                                   Keyboard="Url"
                                   BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                        </VerticalStackLayout>

                        <!-- Port -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Port" FontSize="12"/>
                            <Entry x:Name="ServerPortMobileEntry" 
                                   Text="1433"
                                   Keyboard="Numeric"
                                   BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                        </VerticalStackLayout>

                        <!-- Database Name -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Database Name" FontSize="12"/>
                            <Entry x:Name="DatabaseNameMobileEntry" 
                                   Text="OneManVanFSM"
                                   BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                        </VerticalStackLayout>

                        <!-- Username -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Username" FontSize="12"/>
                            <Entry x:Name="UsernameMobileEntry" 
                                   Placeholder="e.g., OneManVan_sync"
                                   BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                        </VerticalStackLayout>

                        <!-- Password -->
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Password" FontSize="12"/>
                            <Grid ColumnDefinitions="*,Auto">
                                <Entry x:Name="PasswordMobileEntry" 
                                       IsPassword="True"
                                       Placeholder="Password"
                                       BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                                <Button Grid.Column="1" 
                                        x:Name="ShowPasswordMobileButton"
                                        Text="Show"
                                        Padding="8,0"
                                        WidthRequest="70"
                                        HeightRequest="40"
                                        BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                        TextColor="{AppThemeBinding Light=#212121, Dark=#FFFFFF}"
                                        CornerRadius="8"
                                        Margin="8,0,0,0"
                                        Clicked="OnShowPasswordMobileClicked"/>
                            </Grid>
                        </VerticalStackLayout>

                        <!-- Trust Certificate Option -->
                        <HorizontalStackLayout Spacing="12">
                            <CheckBox x:Name="TrustCertificateMobileCheck" 
                                      IsChecked="True"
                                      Color="{AppThemeBinding Light=#4CAF50, Dark=#81C784}"/>
                            <Label Text="Trust Server Certificate" 
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>

                        <!-- Test Connection Button -->
                        <Button Text="Test Connection" 
                                Clicked="OnTestConnectionMobileClicked"
                                BackgroundColor="{AppThemeBinding Light=#4CAF50, Dark=#388E3C}"
                                TextColor="White"
                                CornerRadius="8"
                                HeightRequest="44"/>
                        
                        <Label x:Name="ConnectionStatusMobileLabel" 
                               IsVisible="False"
                               FontSize="12"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>

                    <!-- Current Configuration Display -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#2C2C2C}"
                            StrokeShape="RoundRectangle 8"
                            Padding="12"
                            Stroke="Transparent">
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Current Configuration" 
                                   FontAttributes="Bold" 
                                   FontSize="13"/>
                            <Label x:Name="CurrentConfigMobileLabel" 
                                   FontSize="11"
                                   TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"
                                   LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Save & Restart Button -->
                    <Button Text="Save &amp; Restart App"
                            Clicked="OnSaveDatabaseConfigMobileClicked"
                            BackgroundColor="{AppThemeBinding Light=#4CAF50, Dark=#388E3C}"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="48"
                            FontAttributes="Bold"/>
                </VerticalStackLayout>
            </Border>

            <!-- Business Profile Section (NEW!) -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Business Profile" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#FF9800, Dark=#FFB74D}"/>

                    <Label Text="Your business information appears on invoices, estimates, and customer communications."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto" RowSpacing="12" ColumnSpacing="16">
                        <Label Text="Company Name:" VerticalOptions="Center"/>
                        <Entry Grid.Column="1" 
                               x:Name="CompanyNameEntry"
                               Placeholder="Your Company Name"
                               BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                        
                        <Label Grid.Row="1" Text="Phone:" VerticalOptions="Center"/>
                        <Entry Grid.Row="1" Grid.Column="1" 
                               x:Name="CompanyPhoneEntry"
                               Placeholder="(555) 123-4567"
                               Keyboard="Telephone"
                               BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                        
                        <Label Grid.Row="2" Text="Email:" VerticalOptions="Center"/>
                        <Entry Grid.Row="2" Grid.Column="1" 
                               x:Name="CompanyEmailEntry"
                               Placeholder="info@yourcompany.com"
                               Keyboard="Email"
                               BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                        
                        <Label Grid.Row="3" Text="Address:" VerticalOptions="Center"/>
                        <Entry Grid.Row="3" Grid.Column="1" 
                               x:Name="CompanyAddressEntry"
                               Placeholder="123 Main St, City, ST 12345"
                               BackgroundColor="{AppThemeBinding Light={StaticResource LightInputBackground}, Dark={StaticResource DarkInputBackground}}"/>
                    </Grid>

                    <Button Text="Save Profile"
                            BackgroundColor="{AppThemeBinding Light=#FF9800, Dark=#F57C00}"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnSaveProfileClicked"/>
                </VerticalStackLayout>
            </Border>

            <!-- Business Defaults Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Business Defaults" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#2196F3"/>

                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto" RowSpacing="12" ColumnSpacing="16">
                        <Label Text="Labor Rate ($/hr):" VerticalOptions="Center"/>
                        <Entry Grid.Column="1" 
                               x:Name="LaborRateEntry"
                               Text="85.00"
                               Keyboard="Numeric"
                               Placeholder="85.00"/>
                        
                        <Label Grid.Row="1" Text="Tax Rate (%):" VerticalOptions="Center"/>
                        <Entry Grid.Row="1" Grid.Column="1" 
                               x:Name="TaxRateEntry"
                               Text="7.0"
                               Keyboard="Numeric"
                               Placeholder="7.0"/>
                        
                        <Label Grid.Row="2" Text="Invoice Due (days):" VerticalOptions="Center"/>
                        <Entry Grid.Row="2" Grid.Column="1" 
                               x:Name="InvoiceDueDaysEntry"
                               Text="30"
                               Keyboard="Numeric"
                               Placeholder="30"/>
                    </Grid>

                    <Button Text="Save Defaults"
                            BackgroundColor="#2196F3"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnSaveDefaultsClicked"/>
                </VerticalStackLayout>
            </Border>

            <!-- Backup Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Data Backup" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#2196F3"/>

                    <Label Text="Create a backup of all your data. Backups can be shared or restored later."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <!-- Last Backup Info -->
                    <Border BackgroundColor="{AppThemeBinding Light=#E3F2FD, Dark=#1E3A5F}" 
                           StrokeShape="RoundRectangle 8" 
                           Padding="12"
                           Stroke="Transparent">
                        <Grid ColumnDefinitions="*,Auto">
                            <VerticalStackLayout>
                                <Label Text="Last Backup" 
                                       FontSize="12" 
                                       TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                                <Label x:Name="LastBackupLabel" 
                                       Text="Never" 
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#2196F3"/>
                            </VerticalStackLayout>
                            <Label Grid.Column="1" 
                                   x:Name="BackupCountLabel"
                                   Text="0 backups"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"
                                   VerticalOptions="Center"/>
                        </Grid>
                    </Border>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                        <Button Text="Export Backup"
                                BackgroundColor="#4CAF50"
                                TextColor="White"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnExportBackupClicked"/>
                        <Button Grid.Column="1"
                                Text="Import Backup"
                                BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnImportBackupClicked"/>
                    </Grid>

                    <Button Text="Share Backup"
                            BackgroundColor="#2196F3"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnShareBackupClicked"/>
                </VerticalStackLayout>
            </Border>

            <!-- Database Management Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Database Management" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#F44336, Dark=#EF5350}"/>

                    <Label Text="Manage your database: view statistics, seed demo data, or reset completely."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <!-- Database Statistics -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#2C2C2C}"
                            StrokeShape="RoundRectangle 8"
                            Padding="12"
                            Stroke="Transparent">
                        <VerticalStackLayout Spacing="4">
                            <Label Text="Database Statistics" 
                                   FontAttributes="Bold" 
                                   FontSize="13"/>
                            <Label x:Name="DatabaseStatsMobileLabel" 
                                   FontSize="11"
                                   TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"
                                   LineBreakMode="WordWrap"
                                   Text="Loading statistics..."/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Warning -->
                    <Border BackgroundColor="{AppThemeBinding Light=#FFEBEE, Dark=#5C1A1A}"
                            StrokeShape="RoundRectangle 8"
                            Padding="12"
                            Stroke="Transparent">
                        <Label Text="Warning: These operations cannot be undone. Create a backup before proceeding."
                               FontSize="11"
                               TextColor="{AppThemeBinding Light=#D32F2F, Dark=#EF5350}"
                               LineBreakMode="WordWrap"/>
                    </Border>

                    <!-- Action Buttons -->
                    <Button Text="Refresh Stats"
                            BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                            TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnRefreshDatabaseStatsMobileClicked"/>

                    <Button Text="Seed Demo Data"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnSeedDemoDataMobileClicked"/>

                    <Button Text="Clear All Data"
                            BackgroundColor="#F44336"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnClearAllDataMobileClicked"/>

                    <Button Text="Reset Database"
                            BackgroundColor="#B71C1C"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnResetDatabaseMobileClicked"/>

                    <!-- Info Labels -->
                    <Label Text="� Seed Demo Data: Adds sample records for testing"
                           FontSize="11"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                    <Label Text="� Clear All Data: Removes all records but keeps structure"
                           FontSize="11"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                    <Label Text="� Reset Database: Completely erases and recreates database"
                           FontSize="11"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                </VerticalStackLayout>
            </Border>

            <!-- Full Data Export Section (NEW!) -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="{AppThemeBinding Light=#1976D2, Dark=#64B5F6}"
                   BackgroundColor="{AppThemeBinding Light=#E3F2FD, Dark=#1E3A5F}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Complete Data Export" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#1976D2, Dark=#64B5F6}"/>

                    <Label Text="Export ALL your data to a single file. Edit in Excel and re-import to update or add records."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#1565C0, Dark=#90CAF9}"/>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                        <Button Text="Export All Data"
                                BackgroundColor="#1976D2"
                                TextColor="White"
                                FontAttributes="Bold"
                                CornerRadius="8"
                                HeightRequest="50"
                                Clicked="OnExportAllDataClicked"/>
                        <Button Grid.Column="1"
                                Text="Import All Data"
                                BackgroundColor="{AppThemeBinding Light=#0D47A1, Dark=#1565C0}"
                                TextColor="White"
                                FontAttributes="Bold"
                                CornerRadius="8"
                                HeightRequest="50"
                                Clicked="OnImportAllDataClicked"/>
                    </Grid>

                    <Label Text="Includes: Customers, Sites, Assets, Jobs, Estimates, Invoices, Inventory, Products, Service Agreements"
                           FontSize="11"
                           TextColor="{AppThemeBinding Light=#1565C0, Dark=#90CAF9}"
                           HorizontalTextAlignment="Center"/>
                </VerticalStackLayout>
            </Border>

            <!-- CSV Export Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Individual CSV Export" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#4CAF50, Dark=#81C784}"/>

                    <Label Text="Export specific data categories to separate CSV files."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="12">
                        <Button Text="Export Customers"
                                BackgroundColor="{AppThemeBinding Light=#E8F5E9, Dark=#1B3D1F}"
                                TextColor="{AppThemeBinding Light=#388E3C, Dark=#81C784}"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnExportCustomersCsvClicked"/>
                        <Button Grid.Column="1"
                                Text="Export Inventory"
                                BackgroundColor="{AppThemeBinding Light=#E8F5E9, Dark=#1B3D1F}"
                                TextColor="{AppThemeBinding Light=#388E3C, Dark=#81C784}"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnExportInventoryCsvClicked"/>
                        <Button Grid.Row="1"
                                Text="Export Assets"
                                BackgroundColor="{AppThemeBinding Light=#E8F5E9, Dark=#1B3D1F}"
                                TextColor="{AppThemeBinding Light=#388E3C, Dark=#81C784}"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnExportAssetsCsvClicked"/>
                        <Button Grid.Row="1" Grid.Column="1"
                                Text="Export Jobs"
                                BackgroundColor="{AppThemeBinding Light=#E8F5E9, Dark=#1B3D1F}"
                                TextColor="{AppThemeBinding Light=#388E3C, Dark=#81C784}"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnExportJobsCsvClicked"/>
                    </Grid>

                    <BoxView HeightRequest="1" Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"/>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                        <Button Text="Import Customers CSV"
                                BackgroundColor="{AppThemeBinding Light=#FFF3E0, Dark=#3D2D1F}"
                                TextColor="{AppThemeBinding Light=#E65100, Dark=#FFB74D}"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnImportCustomersCsvClicked"/>
                        <Button Grid.Column="1"
                                Text="Import Inventory CSV"
                                BackgroundColor="{AppThemeBinding Light=#FFF3E0, Dark=#3D2D1F}"
                                TextColor="{AppThemeBinding Light=#E65100, Dark=#FFB74D}"
                                CornerRadius="8"
                                HeightRequest="44"
                                Clicked="OnImportInventoryCsvClicked"/>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Database Stats Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Database Statistics" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#2196F3"/>

                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto" RowSpacing="8" ColumnSpacing="16">
                        <HorizontalStackLayout>
                            <Label Text="Customers:"/>
                            <Label x:Name="CustomerCountLabel" Text="0" TextColor="#2196F3" FontAttributes="Bold" Margin="8,0,0,0"/>
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Grid.Column="1">
                            <Label Text="Assets:"/>
                            <Label x:Name="AssetCountLabel" Text="0" TextColor="#2196F3" FontAttributes="Bold" Margin="8,0,0,0"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Grid.Row="1">
                            <Label Text="Estimates:"/>
                            <Label x:Name="EstimateCountLabel" Text="0" TextColor="#2196F3" FontAttributes="Bold" Margin="8,0,0,0"/>
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Grid.Row="1" Grid.Column="1">
                            <Label Text="Jobs:"/>
                            <Label x:Name="JobCountLabel" Text="0" TextColor="#2196F3" FontAttributes="Bold" Margin="8,0,0,0"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Grid.Row="2">
                            <Label Text="Invoices:"/>
                            <Label x:Name="InvoiceCountLabel" Text="0" TextColor="#2196F3" FontAttributes="Bold" Margin="8,0,0,0"/>
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Grid.Row="2" Grid.Column="1">
                            <Label Text="Inventory:"/>
                            <Label x:Name="InventoryCountLabel" Text="0" TextColor="#2196F3" FontAttributes="Bold" Margin="8,0,0,0"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Grid.Row="3" Grid.ColumnSpan="2">
                            <Label Text="Database Size:"/>
                            <Label x:Name="DbSizeLabel" Text="0 KB" TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}" Margin="8,0,0,0"/>
                        </HorizontalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Danger Zone -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="#F44336">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Danger Zone" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#F44336"/>

                    <Label Text="These actions cannot be undone. Make sure you have a backup first."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <Button Text="Clear All Data"
                            BackgroundColor="#F44336"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnClearDataClicked"/>
                </VerticalStackLayout>
            </Border>

            <!-- Developer Tools Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Developer Tools" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#2196F3"/>

                    <Label Text="Tools for testing and debugging the application."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>

                    <Button Text="Run Tests"
                            BackgroundColor="#9C27B0"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnRunTestsClicked"/>
                    
                    <Button Text="View Schema"
                            BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                            TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnViewSchemaClicked"/>
                </VerticalStackLayout>
            </Border>

            <!-- About Section -->
            <Border StrokeShape="RoundRectangle 12" 
                   Padding="16"
                   Stroke="Transparent">
                <VerticalStackLayout Spacing="8">
                    <Label Text="About" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="#2196F3"/>

                    <Label Text="OneManVan is a personal HVAC job estimator and field service management application by MtnManApps."
                           FontSize="13"
                           TextColor="{AppThemeBinding Light=#757575, Dark=#B0B0B0}"/>
                    
                    <Label Text="Built with .NET MAUI and Entity Framework Core."
                           FontSize="12"
                           TextColor="{AppThemeBinding Light=#9E9E9E, Dark=#808080}"/>
                    
                    <Label Text="Your data stays local and under your control."
                           FontSize="12"
                           TextColor="{AppThemeBinding Light=#9E9E9E, Dark=#808080}"/>
                </VerticalStackLayout>
            </Border>

            <!-- Spacer for bottom padding -->
            <BoxView HeightRequest="20"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>




