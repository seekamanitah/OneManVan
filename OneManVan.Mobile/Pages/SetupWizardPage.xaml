<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OneManVan.Mobile.Pages.SetupWizardPage"
             Title="Welcome"
             BackgroundColor="#1976D2"
             Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="Auto,*,Auto" Padding="0">
        
        <!-- Header -->
        <VerticalStackLayout Grid.Row="0" Padding="24,48,24,24" Spacing="8">
            <Label Text="Welcome to"
                   FontSize="18"
                   TextColor="#BBDEFB"
                   HorizontalOptions="Center"/>
            <Label Text="OneManVan"
                   FontSize="36"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center"/>
            <Label Text="Field Service Management"
                   FontSize="16"
                   TextColor="#BBDEFB"
                   HorizontalOptions="Center"/>
        </VerticalStackLayout>

        <!-- Trade Selection -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="16" Spacing="16">
                
                <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}" 
                        StrokeShape="RoundRectangle 16" 
                        Padding="20"
                        Stroke="Transparent">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,2" Radius="8" Opacity="0.15"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="16">
                        <Label Text="Select Your Trade"
                               FontSize="22"
                               FontAttributes="Bold"
                               TextColor="#333"
                               HorizontalOptions="Center"/>
                        <Label Text="Choose the trade that best describes your business. This configures custom fields, templates, and terminology."
                               FontSize="14"
                               TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"/>
                        
                        <BoxView HeightRequest="1" Color="#E0E0E0" Margin="0,8"/>
                        
                        <!-- Trade Options -->
                        <CollectionView x:Name="TradeCollection"
                                        SelectionMode="Single"
                                        SelectionChanged="OnTradeSelected">
                            <CollectionView.ItemsLayout>
                                <GridItemsLayout Orientation="Vertical" 
                                                 Span="2" 
                                                 HorizontalItemSpacing="12"
                                                 VerticalItemSpacing="12"/>
                            </CollectionView.ItemsLayout>
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Border x:Name="TradeBorder"
                                            BackgroundColor="#F5F5F5"
                                            StrokeShape="RoundRectangle 12"
                                            Stroke="#E0E0E0"
                                            StrokeThickness="2"
                                            Padding="12"
                                            HeightRequest="120">
                                        <VerticalStackLayout Spacing="8" 
                                                             VerticalOptions="Center"
                                                             HorizontalOptions="Center">
                                            <Label Text="{Binding Icon}"
                                                   FontSize="36"
                                                   HorizontalOptions="Center"/>
                                            <Label Text="{Binding Name}"
                                                   FontSize="14"
                                                   FontAttributes="Bold"
                                                   TextColor="#333"
                                                   HorizontalOptions="Center"
                                                   HorizontalTextAlignment="Center"/>
                                            <Label Text="{Binding Description}"
                                                   FontSize="10"
                                                   TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                                                   HorizontalOptions="Center"
                                                   HorizontalTextAlignment="Center"
                                                   LineBreakMode="WordWrap"
                                                   MaxLines="2"/>
                                        </VerticalStackLayout>
                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </VerticalStackLayout>
                </Border>
                
                <!-- Selected Trade Preview -->
                <Border x:Name="PreviewFrame"
                        BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}"
                        StrokeShape="RoundRectangle 12"
                        Padding="16"
                        Stroke="Transparent"
                        IsVisible="False">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,2" Radius="8" Opacity="0.15"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Configuration Preview"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light={StaticResource SectionPrimary}, Dark={StaticResource SectionPrimaryDark}}"/>
                        
                        <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto" RowSpacing="4" ColumnSpacing="12">
                            <Label Text="Asset Label:" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                            <Label x:Name="AssetLabelPreview" Grid.Column="1" TextColor="#333" FontAttributes="Bold"/>
                            
                            <Label Grid.Row="1" Text="Custom Fields:" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                            <Label x:Name="FieldCountPreview" Grid.Row="1" Grid.Column="1" TextColor="#333" FontAttributes="Bold"/>
                            
                            <Label Grid.Row="2" Text="Templates:" TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                            <Label x:Name="TemplateCountPreview" Grid.Row="2" Grid.Column="1" TextColor="#333" FontAttributes="Bold"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Continue Button -->
        <VerticalStackLayout Grid.Row="2" Padding="16,8,16,24" Spacing="12">
            <Button x:Name="ContinueButton"
                    Text="Get Started"
                    BackgroundColor="{AppThemeBinding Light={StaticResource LightCardBackground}, Dark={StaticResource DarkCardBackground}}"
                    TextColor="{AppThemeBinding Light={StaticResource SectionPrimary}, Dark={StaticResource SectionPrimaryDark}}"
                    FontSize="18"
                    FontAttributes="Bold"
                    CornerRadius="12"
                    HeightRequest="56"
                    IsEnabled="False"
                    Clicked="OnContinueClicked"/>
            
            <Label Text="You can change your trade anytime in Settings"
                   FontSize="12"
                   TextColor="#BBDEFB"
                   HorizontalOptions="Center"/>
        </VerticalStackLayout>
        
    </Grid>

</ContentPage>
