<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="OneManVan.Mobile.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:OneManVan.Mobile"
    xmlns:pages="clr-namespace:OneManVan.Mobile.Pages"
    Shell.FlyoutBehavior="Flyout"
    Shell.FlyoutBackgroundColor="{StaticResource Primary}"
    Shell.BackgroundColor="{StaticResource Primary}"
    Shell.ForegroundColor="White"
    Shell.TitleColor="White"
    Shell.DisabledColor="{StaticResource TextTertiary}"
    Shell.UnselectedColor="{StaticResource PrimaryLight}"
    Shell.NavBarHasShadow="True"
    Title="OneManVan FSM">

    <Shell.Resources>
        <ResourceDictionary>
            <!-- Flyout Item Template for consistent styling -->
            <Style TargetType="FlyoutItem" ApplyToDerivedTypes="True">
                <Setter Property="Shell.TabBarBackgroundColor" Value="{StaticResource Surface}" />
                <Setter Property="Shell.TabBarForegroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TabBarTitleColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TabBarUnselectedColor" Value="{StaticResource TextSecondary}" />
            </Style>
        </ResourceDictionary>
    </Shell.Resources>

    <Shell.FlyoutHeader>
        <Grid HeightRequest="140" BackgroundColor="{StaticResource PrimaryDark}" Padding="20">
            <VerticalStackLayout VerticalOptions="Center" Spacing="4">
                <Label Text="OneManVan FSM" 
                       Style="{StaticResource HeadlineStyle}"
                       TextColor="White"/>
                <Label Text="Field Service Management" 
                       Style="{StaticResource CaptionStyle}"
                       TextColor="{StaticResource PrimaryLight}"/>
            </VerticalStackLayout>
        </Grid>
    </Shell.FlyoutHeader>

    <Shell.FlyoutFooter>
        <Grid HeightRequest="60" BackgroundColor="{StaticResource PrimaryDark}" Padding="20,0">
            <Label Text="v1.0 - Offline Ready" 
                   Style="{StaticResource CaptionStyle}"
                   TextColor="{StaticResource PrimaryLight}"
                   VerticalOptions="Center"/>
        </Grid>
    </Shell.FlyoutFooter>

    <!-- Flyout Items -->
    <FlyoutItem Title="Home" Icon="{OnPlatform Default=home.png}">
        <ShellContent ContentTemplate="{DataTemplate local:MainPageModern}" Route="Home"/>
    </FlyoutItem>

    <FlyoutItem Title="Customers" Icon="{OnPlatform Default=person.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:CustomerListPage}" Route="Customers"/>
    </FlyoutItem>

    <FlyoutItem Title="Assets" Icon="{OnPlatform Default=settings.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:AssetListPage}" Route="Assets"/>
    </FlyoutItem>

    <FlyoutItem Title="Estimates" Icon="{OnPlatform Default=document.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:EstimateListPage}" Route="Estimates"/>
    </FlyoutItem>

    <FlyoutItem Title="Jobs" Icon="{OnPlatform Default=calendar.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:JobListPage}" Route="Jobs"/>
    </FlyoutItem>

    <!-- Calendar temporarily disabled for performance optimization -->
    <!--<FlyoutItem Title="Calendar" Icon="{OnPlatform Default=calendar.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:CalendarPage}" Route="Calendar"/>
    </FlyoutItem>-->

    <FlyoutItem Title="Invoices" Icon="{OnPlatform Default=dotnet_bot.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:InvoiceListPage}" Route="Invoices"/>
    </FlyoutItem>

    <FlyoutItem Title="Inventory" Icon="{OnPlatform Default=dotnet_bot.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:InventoryListPage}" Route="Inventory"/>
    </FlyoutItem>

    <FlyoutItem Title="Products" Icon="{OnPlatform Default=dotnet_bot.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:ProductListPage}" Route="Products"/>
    </FlyoutItem>

    <!-- Sites temporarily disabled for performance optimization -->
    <!--<FlyoutItem Title="Sites" Icon="{OnPlatform Default=dotnet_bot.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:SiteListPage}" Route="Sites"/>
    </FlyoutItem>-->

    <!-- Warranty Claims temporarily disabled for performance optimization -->
    <!--<FlyoutItem Title="Warranty Claims" Icon="{OnPlatform Default=dotnet_bot.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:WarrantyClaimsListPage}" Route="WarrantyClaims"/>
    </FlyoutItem>-->

    <FlyoutItem Title="Companies" Icon="{OnPlatform Default=dotnet_bot.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:CompanyListPage}" Route="Companies"/>
    </FlyoutItem>

    <FlyoutItem Title="Service Agreements" Icon="{OnPlatform Default=dotnet_bot.png}">
        <ShellContent ContentTemplate="{DataTemplate pages:ServiceAgreementListPage}" Route="Agreements"/>
    </FlyoutItem>

    <!-- Separator -->
    <FlyoutItem FlyoutDisplayOptions="AsMultipleItems">
        <ShellContent Title="Custom Fields" 
                      ContentTemplate="{DataTemplate pages:SchemaEditorPage}" 
                      Route="CustomFields"/>
        <ShellContent Title="Settings" 
                      ContentTemplate="{DataTemplate pages:SettingsPage}" 
                      Route="Settings"/>
    </FlyoutItem>

    <!-- Bottom TabBar for quick access -->
    <TabBar x:Name="MainTabBar">
        <Tab Title="Home" Icon="{OnPlatform Default=home.png}">
            <ShellContent ContentTemplate="{DataTemplate local:MainPage}" Route="HomeTab"/>
        </Tab>
        <Tab Title="Jobs" Icon="{OnPlatform Default=calendar.png}">
            <ShellContent ContentTemplate="{DataTemplate pages:JobListPage}" Route="JobsTab"/>
        </Tab>
        <Tab Title="Estimates" Icon="{OnPlatform Default=document.png}">
            <ShellContent ContentTemplate="{DataTemplate pages:EstimateListPage}" Route="EstimatesTab"/>
        </Tab>
        <Tab Title="Invoices" Icon="{OnPlatform Default=dotnet_bot.png}">
            <ShellContent ContentTemplate="{DataTemplate pages:InvoiceListPage}" Route="InvoicesTab"/>
        </Tab>
    </TabBar>

</Shell>